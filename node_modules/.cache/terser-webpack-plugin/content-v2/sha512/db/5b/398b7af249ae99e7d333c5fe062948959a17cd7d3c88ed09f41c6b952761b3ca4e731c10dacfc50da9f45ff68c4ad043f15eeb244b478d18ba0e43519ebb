{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-12f07384\"],{\"33a0\":function(t,s,a){},6240:function(t,s,a){\"use strict\";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"d-flex flex-column\",staticStyle:{height:\"100%\"}},[a(\"header\",{staticClass:\"flex-shrink-0\"},[a(\"div\",{staticClass:\"p-4\"},[a(\"b-dropdown\",{staticClass:\"mr-5\",attrs:{text:\"Công việc được giao cho tôi\",variant:\"custom-bg-color\"}},[a(\"b-dropdown-item\",[t._v(\"Công việc được giao cho tôi\")]),a(\"b-dropdown-item\",[t._v(\"Công việc tôi đã giao\")])],1),a(\"b-dropdown\",{attrs:{\"no-caret\":\"\",variant:\"custom-bg-color\"}},[a(\"template\",{slot:\"button-content\"},[a(\"i\",{staticClass:\"fas fa-cog\"})]),a(\"b-dropdown-item\",[t._v(\"Công việc chưa hoàn thành\")]),a(\"b-dropdown-item\",[t._v(\"Công việc đã hoàn thành\")]),a(\"b-dropdown-item\",[t._v(\"Tất cả các công việc\")])],2),a(\"b-button\",{attrs:{variant:\"blue\"},on:{click:t.showAddTask}},[a(\"i\",{staticClass:\"fas fa-plus\"})])],1)]),a(\"div\",{staticClass:\"d-flex flex-grow-1 overflow-auto p-4 tasks-stream\"},[t.loading?a(\"div\",{staticClass:\"tasks-content\"},[a(\"vcl-code\")],1):a(\"div\",{staticClass:\"tasks-content flex-shrink-0\"},t._l(t.taskGroupOrder,function(s,e){return a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.tasks[s].length>0,expression:\"tasks[group].length > 0\"}],key:e,staticClass:\"tasks-section\"},[a(\"h2\",{class:s},[t._v(t._s(s.toUpperCase()))]),a(\"ul\",{staticClass:\"activity-stream task-list\"},t._l(t.tasks[s],function(e){var i;return a(\"li\",{staticClass:\"activity-container\",class:(i={selected:e.id===t.currentTask.id},i[\"task-\"+s]=!0,i)},[a(\"div\",{on:{click:function(s){return t.showCurrentTask(e)}}},[a(\"div\",{staticClass:\"activity task\",attrs:{id:e.id}},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.is_done,expression:\"task.is_done\"}],staticClass:\"activity-type\"},[a(\"i\",{staticClass:\"fas fa-check inactive\"})]),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.is_done,expression:\"!task.is_done\"}],staticClass:\"activity-type\",on:{click:function(s){return t.completeTask(e)}}},[a(\"i\",{staticClass:\"ng-hide fas fa-check inactive\"}),a(\"i\",{staticClass:\"ng-hide fas fa-refresh fa-spin active\"})]),a(\"div\",[a(\"div\",{staticClass:\"activity-object ng-scope\"},[a(\"div\",{staticClass:\"activity-info\"},[a(\"div\",{staticClass:\"activity-body\"},[a(\"p\",{staticClass:\"title\"},[t._v(t._s(e.title))]),a(\"ul\",{staticClass:\"actions\"},[a(\"li\",{staticClass:\"action\"},[a(\"span\",{staticClass:\"datetime\"},[a(\"i\",{staticClass:\"fa fa-clock\"}),a(\"span\",[t._v(\"Due \")]),a(\"span\",{staticClass:\"ng-binding\"},[t._v(t._s(new Date(e.deadline).toLocaleString()))])])]),a(\"li\",{staticClass:\"action\"},[a(\"span\",[a(\"i\",{staticClass:\"fa fa-user\"}),e.assignee?a(\"span\",[t._v(t._s(e.assignee.name))]):t._e()])])])])])])])])])])}),0)])}),0),a(\"div\",{staticClass:\"flex-grow-1 overflow-auto ml-4 bg-light\"},[t.currentTask.id?t._e():a(\"div\",{staticStyle:{\"background-color\":\"white\",padding:\"20px\"}},[a(\"vcl-facebook\")],1),t.currentTask.id?a(\"div\",{staticClass:\"border p-3 text-secondary rounded\",staticStyle:{height:\"100%\"}},[a(\"div\",{staticClass:\"d-flex align-items-center\"},[t._m(0),a(\"div\",{staticClass:\"flex-grow-1\"},[a(\"h5\",{staticClass:\"my-0\"},[a(\"b\",[t._v(t._s(t.currentTask.title))])]),a(\"small\",[a(\"strong\",[t._v(\"Giao cho:\")]),t._v(\" \"+t._s(t.currentTask.assignee.name)+\"\\n                        \")]),a(\"i\",{staticClass:\"fas fa-clock ml-2\"}),a(\"small\",[a(\"strong\",[t._v(\" Thời hạn:\")]),t._v(\" \"+t._s(new Date(t.currentTask.deadline).toLocaleString())+\"\\n                        \")])]),a(\"div\",{staticClass:\"col-1\"},[a(\"b-dropdown\",{attrs:{\"no-caret\":\"\",variant:\"custom-bg-color\"}},[a(\"template\",{slot:\"button-content\"},[a(\"i\",{staticClass:\"fas fa-ellipsis-v\"})]),a(\"b-dropdown-item\",{on:{click:function(s){return t.updateCurrentTask(t.currentTask)}}},[t._v(\"Chỉnh sửa\")]),a(\"b-dropdown-item\",{on:{click:function(s){return t.deleteTask(t.currentTask)}}},[t._v(\"Xóa\")])],2)],1)]),a(\"hr\"),a(\"div\",{staticClass:\"container\"},[a(\"h6\",[t._v(t._s(t.currentTask.description))]),a(\"div\",{staticClass:\"row\"},[t._m(1),a(\"div\",{staticClass:\"col-10 container px-0\"},[a(\"h6\",{staticClass:\"my-0\"},[a(\"b\",[t._v(t._s(t.currentTask.assignee.name))]),a(\"small\",[t._v(\" tạo công việc\")])]),a(\"br\"),a(\"small\",[t._v(\"22h trước\")])])])])]):t._e()])])])},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"task-check mx-2 flex-shrink-0\",attrs:{title:\"Đánh dấu đã hoàn thành\"}},[a(\"i\",{staticClass:\"fas fa-check\"})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"col-1 d-flex align-items-center\"},[a(\"i\",{staticClass:\"fas fa-hospital-symbol fa-2x text-success\"})])}],n=(a(\"ac6a\"),a(\"96cf\"),a(\"3b8d\")),c=a(\"cebc\"),o=a(\"2b0e\"),r=a(\"859b\"),l=a(\"c1df\"),d=a.n(l),u=a(\"5c41\"),v=a(\"2f62\"),h=a(\"68ee\"),f=a(\"fc53\"),k=o[\"default\"].extend({name:\"home\",components:{datetime:r[\"Datetime\"],VclCode:h[\"VclCode\"],VclFacebook:h[\"VclFacebook\"],ModalWrapper:f[\"a\"]},computed:Object(c[\"a\"])({},Object(v[\"c\"])([\"currentUser\",\"currentCompany\",\"getTask\"])),data:function(){return{loading:!0,taskGroupOrder:[\"overdue\",\"today\",\"upcoming\",\"complete\"],tasks:{overdue:[],today:[],upcoming:[],complete:[]},currentTask:new u[\"a\"]}},created:function(){var t=this;console.log(\"get task before\"),this.getAllTask(),this.$store.subscribe(function(s,a){\"clearCurrentTask\"==s.type&&t.getAllTask()})},methods:Object(c[\"a\"])({},Object(v[\"d\"])([\"updateCurrentTask\",\"modals/showAddTask\"]),{showCurrentTask:function(t){this.currentTask=t},deleteTask:function(t){var s=this;this.$dialog.confirm(\"Bạn có chắc chắn?\",{okText:\"Xóa ngay\",cancelText:\"Thoát\"}).then(function(a){t.delete().then(function(t){s.getAllTask()})}).catch(function(){console.log(\"Clicked on cancel\")})},getAllTask:function(){var t=Object(n[\"a\"])(regeneratorRuntime.mark(function t(){var s,a,e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(s in this.tasks)this.tasks[s]=[];return t.next=3,u[\"a\"].instance.getAllTasks();case 3:a=t.sent,a.forEach(function(t){var s=d()(t.deadline),a=d()(Date.now());t.is_done?e.tasks.complete.push(t):s.isBefore(a)?e.tasks.overdue.push(t):s.isAfter(a)?e.tasks.upcoming.push(t):e.tasks.today.push(t)}),a.length>0&&(this.currentTask=a[0]),this.loading=!1;case 7:case\"end\":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),showAddTask:function(){this[\"modals/showAddTask\"](!0)}})}),p=k,m=(a(\"a915\"),a(\"2877\")),g=Object(m[\"a\"])(p,e,i,!1,null,null,null);s[\"default\"]=g.exports},a915:function(t,s,a){\"use strict\";var e=a(\"33a0\"),i=a.n(e);i.a}}]);","extractedComments":[]}