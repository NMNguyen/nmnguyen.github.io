{"remainingRequest":"/Volumes/Data/app.cloudjet.work/node_modules/babel-loader/lib/index.js!/Volumes/Data/app.cloudjet.work/node_modules/ts-loader/index.js??ref--13-2!/Volumes/Data/app.cloudjet.work/src/models/PipelineStage.ts","dependencies":[{"path":"/Volumes/Data/app.cloudjet.work/src/models/PipelineStage.ts","mtime":1557830879589},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/cache-loader/dist/cjs.js","mtime":1557114467143},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/babel-loader/lib/index.js","mtime":1557114461372},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/ts-loader/index.js","mtime":1557114465832}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Volumes/Data/app.cloudjet.work/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Volumes/Data/app.cloudjet.work/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Volumes/Data/app.cloudjet.work/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Volumes/Data/app.cloudjet.work/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Volumes/Data/app.cloudjet.work/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Volumes/Data/app.cloudjet.work/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport Model from \"./base\";\nimport { messages } from \"@/messages\";\n\nvar PipelineStage =\n/*#__PURE__*/\nfunction (_Model) {\n  _inherits(PipelineStage, _Model);\n\n  function PipelineStage() {\n    var _this;\n\n    _classCallCheck(this, PipelineStage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PipelineStage).call(this, \"PipelineStage\"));\n    _this.title = \"\";\n    _this.pipeline_id = \"\";\n    _this.stage_type = \"\";\n    _this.index = 0;\n    _this.icon = \"\";\n    _this.disabledRemove = false; // Có 1 stage default applied là không cho phép xóa.\n\n    _this.showInPositionPipelineStageModal = true; // Có 1 số item thuộc list default stage không hiển thị.\n\n    return _this;\n  } // Cần phải có list stage default với pipeline_id là default.\n  // => Cần define các field mô tả như icon, title.\n  // 1. Khi tạo mới 1 pipeline (PL), việc khởi tạo sẽ yêu cầu có những stage mặc định.\n  // 2. Chỉ sử dụng Vuex để lưu, vì giữa các modal còn xử lý việc lưu tạm object nữa\n  //     nên code rất dài so với việc lưu default trên DB và xử lý việc tạm ở Vuex.\n\n\n  _createClass(PipelineStage, [{\n    key: \"getAllStages\",\n    value: function () {\n      var _getAllStages = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(pipeline_id) {\n        var results, modelCollection;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                results = new Array();\n                modelCollection = this.firestore.collection(this.COLLECTION);\n                _context3.next = 4;\n                return modelCollection.where(\"pipeline_id\", \"==\", pipeline_id).orderBy('index', 'asc').limit(20).get().then(\n                /*#__PURE__*/\n                function () {\n                  var _ref = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee2(querySnapshot) {\n                    var listState, arrayP;\n                    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (!(querySnapshot.empty == true)) {\n                              _context2.next = 7;\n                              break;\n                            }\n\n                            listState = [{\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_APPLIED,\n                              icon: 'fa fa-user',\n                              value: 'applied',\n                              disabledRemove: true,\n                              showInPositionPipelineStageModal: true\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_FEEDBACK,\n                              icon: 'fa fa-users',\n                              value: 'feedback',\n                              showInPositionPipelineStageModal: true\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_INTERVIEW,\n                              icon: 'fa fa-comments',\n                              value: 'interview',\n                              showInPositionPipelineStageModal: true\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_MADEOFFER,\n                              icon: 'fa fa-gift',\n                              value: 'madeoffer',\n                              showInPositionPipelineStageModal: true\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_DISQUALIFIED,\n                              icon: 'fa fa-trash',\n                              value: 'disqualified',\n                              showInPositionPipelineStageModal: true\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_HIRED,\n                              icon: 'fa fa-trophy',\n                              value: 'hired',\n                              showInPositionPipelineStageModal: true\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_PHONESCREEN,\n                              icon: 'fa fa-phone',\n                              value: 'phonescreen',\n                              showInPositionPipelineStageModal: false\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_SOURCED,\n                              icon: 'fa fa-upload',\n                              value: 'sourced',\n                              showInPositionPipelineStageModal: false\n                            }, {\n                              title: messages.SR_007_MODAL_PIPELINE_STAGE_OTHER,\n                              icon: 'fa fa-list-ul',\n                              value: 'other',\n                              showInPositionPipelineStageModal: false\n                            }];\n                            arrayP = listState.map(\n                            /*#__PURE__*/\n                            function () {\n                              var _ref2 = _asyncToGenerator(\n                              /*#__PURE__*/\n                              regeneratorRuntime.mark(function _callee(state, index) {\n                                var _newStage;\n\n                                return regeneratorRuntime.wrap(function _callee$(_context) {\n                                  while (1) {\n                                    switch (_context.prev = _context.next) {\n                                      case 0:\n                                        _newStage = new PipelineStage();\n                                        if (state.showInPositionPipelineStageModal == true) _newStage.index = index + 1;\n                                        _newStage.title = state.title;\n                                        _newStage.stage_type = state.value;\n                                        _newStage.pipeline_id = pipeline_id;\n                                        _newStage.icon = state.icon;\n                                        _newStage.showInPositionPipelineStageModal = state.showInPositionPipelineStageModal;\n                                        _newStage.disabledRemove = !!state.disabledRemove; // stage.disabledRemove = 'abc'  --> !disabledRemove == false --> !!disabledRemove == true.\n\n                                        _context.next = 10;\n                                        return _newStage.insert().then(function (new_stage) {\n                                          var _stage = new PipelineStage();\n\n                                          Object.assign(_stage, new_stage);\n                                          results.push(_stage);\n                                        });\n\n                                      case 10:\n                                        return _context.abrupt(\"return\", state);\n\n                                      case 11:\n                                      case \"end\":\n                                        return _context.stop();\n                                    }\n                                  }\n                                }, _callee);\n                              }));\n\n                              return function (_x3, _x4) {\n                                return _ref2.apply(this, arguments);\n                              };\n                            }());\n                            _context2.next = 5;\n                            return Promise.all(arrayP);\n\n                          case 5:\n                            _context2.next = 9;\n                            break;\n\n                          case 7:\n                            _context2.next = 9;\n                            return querySnapshot.forEach(function (docSnapshot) {\n                              var stage = new PipelineStage();\n                              Object.assign(stage, docSnapshot.data());\n                              stage.id = docSnapshot.id;\n                              results.push(stage);\n                            });\n\n                          case 9:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x2) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n\n              case 4:\n                _context3.next = 6;\n                return results;\n\n              case 6:\n                return _context3.abrupt(\"return\", _context3.sent);\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getAllStages(_x) {\n        return _getAllStages.apply(this, arguments);\n      }\n\n      return getAllStages;\n    }()\n  }]);\n\n  return PipelineStage;\n}(Model);\n\nexport { PipelineStage as default };",{"version":3,"sources":["/Volumes/Data/app.cloudjet.work/src/models/PipelineStage.ts"],"names":[],"mappings":"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","sourcesContent":["import Model from './base';\nimport {messages} from \"@/messages\";\n\nexport default class PipelineStage extends Model {\n\n    title: string = \"\";\n    pipeline_id: string = \"\";\n    stage_type: string = \"\";\n    index: number = 0;\n    icon: string = \"\";\n    disabledRemove: boolean=false; // Có 1 stage default applied là không cho phép xóa.\n    showInPositionPipelineStageModal: boolean=true; // Có 1 số item thuộc list default stage không hiển thị.\n\n    // Cần phải có list stage default với pipeline_id là default.\n    // => Cần define các field mô tả như icon, title.\n    // 1. Khi tạo mới 1 pipeline (PL), việc khởi tạo sẽ yêu cầu có những stage mặc định.\n    // 2. Chỉ sử dụng Vuex để lưu, vì giữa các modal còn xử lý việc lưu tạm object nữa\n    //     nên code rất dài so với việc lưu default trên DB và xử lý việc tạm ở Vuex.\n\n    public async getAllStages(pipeline_id:string): Promise<PipelineStage[]>{\n        const results: PipelineStage[] = new Array();\n        const modelCollection = this.firestore.collection(this.COLLECTION);\n        await modelCollection\n            .where(\"pipeline_id\", \"==\", pipeline_id)\n            .orderBy('index', 'asc')\n            .limit(20).get().then(  async (querySnapshot)=> {\n            if (querySnapshot.empty == true) {\n                const listState = [\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_APPLIED,\n                        icon: 'fa fa-user',\n                        value: 'applied',\n                        disabledRemove: true,\n                        showInPositionPipelineStageModal: true,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_FEEDBACK,\n                        icon: 'fa fa-users',\n                        value: 'feedback',\n                        showInPositionPipelineStageModal: true,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_INTERVIEW,\n                        icon: 'fa fa-comments',\n                        value: 'interview',\n                        showInPositionPipelineStageModal: true,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_MADEOFFER,\n                        icon: 'fa fa-gift',\n                        value: 'madeoffer',\n                        showInPositionPipelineStageModal: true,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_DISQUALIFIED,\n                        icon: 'fa fa-trash',\n                        value: 'disqualified',\n                        showInPositionPipelineStageModal: true,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_HIRED,\n                        icon: 'fa fa-trophy',\n                        value: 'hired',\n                        showInPositionPipelineStageModal: true,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_PHONESCREEN,\n                        icon: 'fa fa-phone',\n                        value: 'phonescreen',\n                        showInPositionPipelineStageModal: false,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_SOURCED,\n                        icon: 'fa fa-upload',\n                        value: 'sourced',\n                        showInPositionPipelineStageModal: false,\n                    },\n                    {\n                        title: messages.SR_007_MODAL_PIPELINE_STAGE_OTHER,\n                        icon: 'fa fa-list-ul',\n                        value: 'other',\n                        showInPositionPipelineStageModal: false,\n                    }\n                ]\n                const arrayP = listState.map( async (state, index) => {\n                    let _newStage = new PipelineStage();\n                    if (state.showInPositionPipelineStageModal ==  true) _newStage.index = index + 1;\n                    _newStage.title = state.title;\n                    _newStage.stage_type = state.value;\n                    _newStage.pipeline_id = pipeline_id;\n                    _newStage.icon = state.icon;\n                    _newStage.showInPositionPipelineStageModal = state.showInPositionPipelineStageModal;\n                    _newStage.disabledRemove = !!state.disabledRemove; // stage.disabledRemove = 'abc'  --> !disabledRemove == false --> !!disabledRemove == true.\n                    await _newStage.insert().then((new_stage) => {\n                        let _stage = new PipelineStage();\n                        Object.assign(_stage, new_stage);\n                        results.push(_stage);\n                    });\n                    return state;\n                })\n                await Promise.all(arrayP)\n\n            }else {\n                await querySnapshot.forEach(docSnapshot => {\n                    let stage = new PipelineStage()\n                    Object.assign(stage, docSnapshot.data());\n                    stage.id = docSnapshot.id;\n                    results.push(stage);\n                });\n            }\n        })\n        return await results\n    }\n\n    constructor() {\n        super(\"PipelineStage\");\n    }\n\n\n}\n"],"sourceRoot":""}]}