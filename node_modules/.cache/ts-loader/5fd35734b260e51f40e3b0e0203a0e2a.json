{"remainingRequest":"/Volumes/Data/app.cloudjet.work/node_modules/thread-loader/dist/cjs.js!/Volumes/Data/app.cloudjet.work/node_modules/babel-loader/lib/index.js!/Volumes/Data/app.cloudjet.work/node_modules/ts-loader/index.js??ref--13-3!/Volumes/Data/app.cloudjet.work/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Data/app.cloudjet.work/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Data/app.cloudjet.work/src/views/Login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Volumes/Data/app.cloudjet.work/src/views/Login.vue","mtime":1557114387696},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/cache-loader/dist/cjs.js","mtime":1557114467143},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/thread-loader/dist/cjs.js","mtime":1557114467785},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/babel-loader/lib/index.js","mtime":1557114461372},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/ts-loader/index.js","mtime":1557114465832},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/cache-loader/dist/cjs.js","mtime":1557114467143},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/vue-loader/lib/index.js","mtime":1557114467992}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Volumes/Data/app.cloudjet.work/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport Vue from \"vue\";\nimport { fauth } from '@/firebase';\nimport User from \"../models/User\";\nexport default Vue.extend({\n  name: \"LoginPage\",\n  data: function data() {\n    return {\n      email: \"\",\n      password: \"\",\n      loading: false,\n      error: {\n        email: false,\n        password: false,\n        message: ''\n      }\n    };\n  },\n  methods: {\n    login: function () {\n      var _login = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(ev) {\n        var credential, uid, user, error;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                ev.preventDefault();\n                this.loading = true;\n                this.error = {\n                  email: false,\n                  password: false,\n                  message: ''\n                };\n                _context.prev = 3;\n                _context.next = 6;\n                return fauth.signInWithEmailAndPassword(this.email, this.password);\n\n              case 6:\n                credential = _context.sent;\n                uid = credential.user ? credential.user.uid : '';\n                _context.next = 10;\n                return new User().getById(uid);\n\n              case 10:\n                user = _context.sent;\n                this.$router.replace('/');\n                _context.next = 20;\n                break;\n\n              case 14:\n                _context.prev = 14;\n                _context.t0 = _context[\"catch\"](3);\n                error = _context.t0;\n                this.error = {\n                  email: error.code == 'auth/user-not-found',\n                  password: error.code == 'auth/wrong-password',\n                  message: error.message\n                }; // @ts-ignore\n\n                this.$log.error(error);\n                this.$toasted.error(error.message, {\n                  position: 'top-center'\n                });\n\n              case 20:\n                this.loading = false;\n\n              case 21:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 14]]);\n      }));\n\n      function login(_x) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    fauth.onAuthStateChanged(function (user) {\n      if (user) {\n        _this.$router.replace('/');\n      }\n    });\n  }\n});",null]}