{"remainingRequest":"/Volumes/Data/app.cloudjet.work/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Data/app.cloudjet.work/src/views/Login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Volumes/Data/app.cloudjet.work/src/views/Login.vue","mtime":1557114387696},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/cache-loader/dist/cjs.js","mtime":1557114467143},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/thread-loader/dist/cjs.js","mtime":1557114467785},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/babel-loader/lib/index.js","mtime":1557114461372},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/ts-loader/index.js","mtime":1557114465832},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/cache-loader/dist/cjs.js","mtime":1557114467143},{"path":"/Volumes/Data/app.cloudjet.work/node_modules/vue-loader/lib/index.js","mtime":1557114467992}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    import Vue from \"vue\";\n    import {fauth} from '@/firebase';\n    import {FirebaseError} from 'firebase';\nimport User from '../models/User';\n\n    export default Vue.extend({\n        name: \"LoginPage\",\n        data() {\n            return {\n                email: \"\",\n                password: \"\",\n                loading: false,\n                error: {\n                    email: false,\n                    password: false,\n                    message: '',\n                }\n            }\n        },\n\n        methods: {\n            async login(ev: Event): Promise<any>\n            {\n                ev.preventDefault();\n                this.loading = true;\n                this.error = {\n                    email: false,\n                    password: false,\n                    message: '',\n                };\n\n                try {\n                    const credential = await fauth.signInWithEmailAndPassword(\n                        this.email,\n                        this.password\n                    );\n                    const uid = credential.user ? credential.user.uid : '';\n                    const user = await (new User).getById(uid);\n\n                    this.$router.replace('/');\n                } catch (e) {\n                    const error = e as FirebaseError;\n                    this.error = {\n                        email: error.code == 'auth/user-not-found',\n                        password: error.code == 'auth/wrong-password',\n                        message: error.message,\n                    };\n\n                    // @ts-ignore\n                    this.$log.error(error);\n                    this.$toasted.error(error.message, {\n                        position: 'top-center',\n                    });\n                }\n\n                this.loading = false;\n            }\n        },\n\n        mounted() {\n            fauth.onAuthStateChanged(user=>{\n                if (user) {\n                    this.$router.replace('/');\n                }\n            })\n        },\n\n    });\n",null]}